.title-screen{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:radial-gradient(circle at 18% 18%,rgba(255,216,127,.08),transparent 32%),radial-gradient(circle at 82% 12%,rgba(116,186,255,.08),transparent 30%),radial-gradient(circle at 30% 78%,rgba(255,144,104,.05),transparent 34%),linear-gradient(180deg,#080b14,#0c1223 45%,#05070d);color:#f6e9d7;cursor:pointer;overflow:hidden}.title-screen:before{content:"";position:absolute;inset:-18%;background:radial-gradient(circle at 35% 40%,rgba(104,186,255,.14),transparent 42%),radial-gradient(circle at 70% 75%,rgba(255,216,127,.12),transparent 40%);filter:blur(18px);opacity:.85;animation:menuAurora 18s ease-in-out infinite alternate;pointer-events:none;z-index:0}.title-screen:after{content:"";position:absolute;inset:0;background-image:radial-gradient(1px 1px at 20% 30%,rgba(255,255,255,.7),transparent),radial-gradient(1px 1px at 55% 80%,rgba(255,255,255,.6),transparent),radial-gradient(1px 1px at 80% 25%,rgba(255,255,255,.55),transparent),radial-gradient(1px 1px at 40% 65%,rgba(255,255,255,.45),transparent);opacity:.4;animation:starField 26s linear infinite;pointer-events:none;z-index:0}.title-screen-content{position:relative;z-index:1;text-align:center;padding:3rem 3.25rem;border-radius:20px;background:linear-gradient(145deg,#161924f0,#0c0e18f5);border:1px solid rgba(255,216,127,.28);box-shadow:0 26px 60px #0000008c,inset 0 0 0 1px #ffffff08;backdrop-filter:blur(6px)}.title-screen-content:before{content:"";position:absolute;inset:1px;border-radius:18px;border:1px solid rgba(255,255,255,.05);pointer-events:none}.title-screen-logo{font-size:4.2rem;font-weight:800;letter-spacing:.2em;margin:0 0 1.2rem;display:inline-block;padding:.9rem 1.5rem;border-radius:18px;text-transform:uppercase;background:linear-gradient(125deg,#f9e4b2,#f2c572 45%,#ffe7a4);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-shadow:0 10px 25px rgba(0,0,0,.55),0 0 30px rgba(249,214,127,.25);box-shadow:0 0 0 2px #ffd87f73,0 0 26px #ffd87f52,0 0 54px #f2c57247}.title-screen-subtitle{margin:0;font-size:1.05rem;letter-spacing:.14em;text-transform:uppercase;color:#c0c8de;text-shadow:0 2px 8px rgba(0,0,0,.55);animation:subtitlePulse 2s ease-in-out infinite alternate}@keyframes subtitlePulse{0%{opacity:.85;transform:translateY(0)}to{opacity:1;transform:translateY(-2px)}}.title-screen-parade{position:absolute;bottom:60px;left:0;right:0;height:64px;overflow:hidden;z-index:2}.title-screen-character{position:absolute;bottom:0;animation:characterWalk 12s linear infinite;opacity:0}.title-screen-sprite{width:48px;height:48px;image-rendering:pixelated;image-rendering:crisp-edges;filter:drop-shadow(0 4px 8px rgba(0,0,0,.5))}@keyframes characterWalk{0%{left:-60px;opacity:0}5%{opacity:1}95%{opacity:1}to{left:calc(100% + 60px);opacity:0}}.overworld-shell{display:flex;flex-direction:column;align-items:center;gap:.5rem;padding:.5rem .75rem 1.25rem;background:#03080c}.location-banner{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap;background:#050c11b8;border:1px solid rgba(255,255,255,.08);box-shadow:0 8px 24px #00000059;border-radius:999px;padding:.4rem .75rem;color:#e7f4f1;backdrop-filter:blur(8px)}.location-title{text-transform:uppercase;letter-spacing:.08em;font-weight:700;font-size:.95rem}.location-meta{display:flex;align-items:center;gap:.35rem;flex-wrap:wrap}.location-chip{padding:.2rem .55rem;border-radius:999px;background:#ffffff0f;border:1px solid rgba(255,255,255,.08);font-size:.85rem;color:#d9e8e5}.location-chip--ghost{background:transparent;border-color:#ffffff26;color:#e9f4f1cc}.overworld-stage{background:radial-gradient(circle at 30% 30%,rgba(79,149,255,.1),transparent 45%),radial-gradient(circle at 70% 70%,rgba(255,199,94,.08),transparent 40%),#03080c;padding:.85rem;border-radius:14px;border:1px solid rgba(255,255,255,.08);box-shadow:0 14px 40px #00000073}.overworld-container{display:flex;flex-direction:column;gap:.1rem;background:#060c11e6;border:1px solid rgba(255,255,255,.08);border-radius:8px;padding:.4rem;width:fit-content;margin:0 auto;box-shadow:inset 0 0 0 1px #00000059}.tile-row{display:flex}.tile{width:32px;height:32px;border:1px solid rgba(255,255,255,.04);background-size:cover;display:inline-flex;justify-content:center;align-items:center;position:relative}.tile-grass{background:linear-gradient(135deg,#3f6e3b,#4f8c47)}.tile-path{background:linear-gradient(90deg,rgba(0,0,0,.06) 1px,transparent 1px),linear-gradient(180deg,rgba(0,0,0,.06) 1px,transparent 1px),#c1a362;background-size:8px 8px,8px 8px,cover}.tile-water{background-color:#3b7ca8}.tile-wall{background-color:#5b5b5b}.tile-door{background:linear-gradient(180deg,#b07a3a,#7a4f22)}.tile-npc{background-color:transparent}.tile[data-sprite=house-door]{border-color:#ffffff14}.post-battle-cutscene{position:fixed;inset:0;z-index:10000;display:flex;align-items:center;justify-content:center}.post-battle-cutscene.victory{background:linear-gradient(135deg,#4caf50e6,#8bc34ae6)}.post-battle-cutscene.defeat{background:linear-gradient(135deg,#9e9e9ee6,#616161e6)}.cutscene-container{position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.cutscene-background{position:absolute;inset:0;overflow:hidden}.victory-particles{position:absolute;width:100%;height:100%;background:radial-gradient(circle at 50% 50%,rgba(255,215,127,.3) 0%,transparent 70%);animation:particlePulse 2s ease-in-out infinite}@keyframes particlePulse{0%,to{opacity:.3;transform:scale(1)}50%{opacity:.6;transform:scale(1.1)}}.cutscene-message-box{position:relative;z-index:2;background:#000000d9;border:3px solid #fff;border-radius:12px;padding:2rem;max-width:600px;width:90%;box-shadow:0 8px 32px #00000080}.cutscene-header{text-align:center;margin-bottom:1.5rem}.cutscene-header h2{font-size:2rem;font-weight:700;margin:0;color:#fff;text-shadow:2px 2px 4px rgba(0,0,0,.8)}.cutscene-content{margin-bottom:1.5rem;min-height:60px}.cutscene-text{font-size:1.25rem;line-height:1.6;color:#fff;text-align:center;margin:0}.cutscene-footer{display:flex;flex-direction:column;align-items:center;gap:1rem}.progress-indicator{display:flex;gap:.5rem;justify-content:center}.progress-dot{width:10px;height:10px;border-radius:50%;background:#ffffff4d;transition:background .3s}.progress-dot.active{background:#fff;box-shadow:0 0 8px #fffc}.progress-dot.completed{background:#fff9}.cutscene-button{padding:.75rem 2rem;font-size:1rem;font-weight:700;color:#fff;background:#4caf50;border:2px solid #fff;border-radius:8px;cursor:pointer;transition:all .2s;text-transform:uppercase}.cutscene-button:hover{background:#45a049;transform:scale(1.05)}.cutscene-button:active{transform:scale(.95)}.cutscene-hint{margin-top:1rem;text-align:center;font-size:.875rem;color:#fff9;font-style:italic}.victory-overlay{position:fixed;inset:0;z-index:9999;display:flex;align-items:center;justify-content:center;pointer-events:none}.victory-flash{position:absolute;inset:0;background:radial-gradient(circle at center,rgba(255,215,127,.6) 0%,rgba(255,255,255,.4) 30%,transparent 70%);animation:victoryFlash .8s ease-out forwards}@keyframes victoryFlash{0%{opacity:0;transform:scale(.5)}50%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(1.5)}}.victory-text{position:relative;z-index:2;text-align:center;animation:victoryAppear .6s ease-out forwards}@keyframes victoryAppear{0%{opacity:0;transform:translateY(-50px) scale(.5)}60%{opacity:1;transform:translateY(0) scale(1.2)}to{opacity:1;transform:translateY(0) scale(1)}}.victory-title{font-size:72px;font-weight:900;color:#ffd87f;text-shadow:4px 4px 0 #000,-2px -2px 0 #000,2px -2px 0 #000,-2px 2px 0 #000,0 0 20px rgba(255,215,127,.8),0 0 40px rgba(255,215,127,.5);letter-spacing:8px;margin:0;animation:victoryTextPulse 1s ease-in-out infinite}@keyframes victoryTextPulse{0%,to{transform:scale(1);filter:brightness(1)}50%{transform:scale(1.05);filter:brightness(1.2)}}.victory-stars{margin-top:20px;display:flex;justify-content:center;gap:20px}.star{font-size:48px;display:inline-block;filter:drop-shadow(0 0 10px rgba(255,215,127,.8));animation:starTwinkle .8s ease-in-out infinite}.star-1{animation-delay:0s}.star-2{animation-delay:.2s}.star-3{animation-delay:.4s}@keyframes starTwinkle{0%,to{transform:scale(1) rotate(0);opacity:1}50%{transform:scale(1.3) rotate(180deg);opacity:.7}}.victory-particles{position:absolute;inset:0;overflow:hidden;z-index:1}.particle{position:absolute;bottom:-20px;width:8px;height:8px;background:radial-gradient(circle,#ffd87f,#ffa050);border-radius:50%;animation:particleRise linear forwards;filter:drop-shadow(0 0 4px rgba(255,215,127,.8))}@keyframes particleRise{0%{transform:translateY(0) scale(1);opacity:1}to{transform:translateY(-100vh) scale(.5);opacity:0}}@media (max-width: 768px){.victory-title{font-size:48px;letter-spacing:4px}.star{font-size:36px}}.defeat-overlay{position:fixed;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#0a0808;z-index:1000;animation:defeatFadeIn .5s ease-out}@keyframes defeatFadeIn{0%{opacity:0}to{opacity:1}}.defeat-vignette{position:absolute;inset:0;background:radial-gradient(circle at center,transparent 30%,#000 100%);pointer-events:none}.defeat-text{text-align:center;z-index:1;animation:defeatTextFade .8s ease-out .3s both}@keyframes defeatTextFade{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.defeat-title{font-size:3rem;color:#8b0000;text-shadow:0 0 30px rgba(139,0,0,.5);margin:0;letter-spacing:.3em}.defeat-subtitle{font-size:1.2rem;color:#666;margin-top:1rem}.defeat-continue{margin-top:2rem;padding:.75rem 2rem;background:#333;border:2px solid #555;border-radius:8px;color:#ccc;font-size:1rem;cursor:pointer;z-index:1;animation:defeatTextFade .8s ease-out .8s both}.defeat-continue:hover{background:#444;border-color:#666}.main-menu{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:radial-gradient(circle at 18% 18%,rgba(255,216,127,.08),transparent 32%),radial-gradient(circle at 82% 12%,rgba(116,186,255,.08),transparent 30%),radial-gradient(circle at 30% 78%,rgba(255,144,104,.05),transparent 34%),linear-gradient(180deg,#080b14,#0c1223 45%,#05070d);color:#f6e9d7;overflow:hidden}.main-menu:before{content:"";position:absolute;inset:-18%;background:radial-gradient(circle at 35% 40%,rgba(104,186,255,.14),transparent 42%),radial-gradient(circle at 70% 75%,rgba(255,216,127,.12),transparent 40%);filter:blur(18px);opacity:.85;animation:menuAurora 18s ease-in-out infinite alternate;pointer-events:none;z-index:0}.main-menu:after{content:"";position:absolute;inset:0;background-image:radial-gradient(1px 1px at 20% 30%,rgba(255,255,255,.7),transparent),radial-gradient(1px 1px at 55% 80%,rgba(255,255,255,.6),transparent),radial-gradient(1px 1px at 80% 25%,rgba(255,255,255,.55),transparent),radial-gradient(1px 1px at 40% 65%,rgba(255,255,255,.45),transparent);opacity:.4;animation:starField 26s linear infinite;pointer-events:none;z-index:0}.main-menu-content{position:relative;z-index:1;text-align:center;padding:3rem 3.5rem;border-radius:20px;background:linear-gradient(145deg,#161924f0,#0c0e18f5);border:1px solid rgba(255,216,127,.28);box-shadow:0 26px 60px #0000008c,inset 0 0 0 1px #ffffff08;backdrop-filter:blur(6px)}.main-menu-content:before{content:"";position:absolute;inset:1px;border-radius:18px;border:1px solid rgba(255,255,255,.05);pointer-events:none}.main-menu-title{font-size:3.4rem;font-weight:800;letter-spacing:.18em;color:#f6e9d7;margin:0 0 2.4rem;text-transform:uppercase;background:linear-gradient(125deg,#f9e4b2,#f2c572 45%,#ffe7a4);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-shadow:0 10px 25px rgba(0,0,0,.55),0 0 30px rgba(249,214,127,.25)}.main-menu-options{display:flex;flex-direction:column;gap:1.1rem;align-items:stretch;min-width:260px}.main-menu-option{position:relative;width:100%;padding:1rem 2rem;font-size:1.1rem;letter-spacing:.12em;text-transform:uppercase;background:linear-gradient(180deg,#2c1d0f,#1b120a);border:1px solid rgba(255,216,127,.35);border-radius:14px;color:#f6e6d2;cursor:pointer;transition:transform .15s ease,box-shadow .15s ease,border-color .15s ease,color .15s ease;box-shadow:inset 0 1px #ffffff14,inset 0 -2px #00000059,0 12px 28px #0006}.main-menu-option:after{content:"";position:absolute;inset:4px;border-radius:10px;border:1px solid rgba(255,216,127,.18);opacity:0;transition:opacity .2s ease,box-shadow .2s ease;pointer-events:none}.main-menu-option:hover:not(.disabled),.main-menu-option.selected{transform:translateY(-2px);border-color:#f9d67f;color:#ffe7b8;background:linear-gradient(180deg,#372514,#23160c);box-shadow:inset 0 1px #ffffff1f,inset 0 -2px #00000073,0 16px 36px #0000008c,0 0 20px #f9d67f59}.main-menu-option:hover:not(.disabled):after,.main-menu-option.selected:after{opacity:1;box-shadow:0 0 22px #f9d67f59}.main-menu-option:active:not(.disabled){transform:translateY(0);box-shadow:inset 0 2px 6px #00000080,0 10px 20px #0006}.main-menu-option.disabled{opacity:.5;cursor:not-allowed;filter:saturate(.6)}.main-menu-option:focus-visible{outline:2px solid #f9d67f;outline-offset:3px}@keyframes menuAurora{0%{transform:translate3d(-12px,-8px,0) scale(1)}to{transform:translate3d(14px,10px,0) scale(1.05)}}@keyframes starField{0%{background-position:0 0}to{background-position:-220px 220px}}.main-menu-characters{position:absolute;bottom:80px;display:flex;flex-direction:column;gap:16px;z-index:1}.main-menu-characters--left{left:60px}.main-menu-characters--right{right:60px}.main-menu-sprite{width:64px;height:64px;image-rendering:pixelated;image-rendering:crisp-edges;filter:drop-shadow(0 4px 12px rgba(0,0,0,.6));animation:spriteFloat 3s ease-in-out infinite;opacity:0;animation-fill-mode:forwards}@keyframes spriteFloat{0%{transform:translateY(0);opacity:0}10%{opacity:1}50%{transform:translateY(-8px)}to{transform:translateY(0);opacity:1}}.prebattle-v2-overlay{position:fixed;inset:0;background:linear-gradient(180deg,#1a0a00,#2a1a0a);z-index:1000;display:flex;align-items:center;justify-content:center;padding:1rem}.prebattle-v2-container{width:100%;max-width:960px;height:640px;max-height:90vh;background:linear-gradient(180deg,#1a0a00,#2a1a0a);border:4px solid #8b6a4a;border-radius:12px;display:flex;flex-direction:column;box-shadow:0 20px 60px #000c;overflow:hidden}.prebattle-v2-error{text-align:center;padding:2rem;color:#ff7a7a}.prebattle-v2-error button{margin-top:1rem;padding:.5rem 1.5rem;background:#4a3a2a;border:2px solid #8b6a4a;border-radius:8px;color:#ffd87f;cursor:pointer}.prebattle-v2-header{padding:1rem 1.5rem;background:#0000004d;border-bottom:2px solid #6a5a4a;text-align:center}.prebattle-v2-title{font-size:1.5rem;font-weight:700;color:#ffd87f;text-shadow:2px 2px 4px #000;margin-bottom:.25rem}.prebattle-v2-subtitle{font-size:.9rem;color:#aaa}.prebattle-v2-layout{flex:1;display:grid;grid-template-columns:1fr 400px;gap:1.5rem;padding:1rem 1.5rem;overflow:hidden}.panel-title{font-size:1rem;font-weight:700;color:#ffd87f;margin-bottom:.75rem;padding-bottom:.5rem;border-bottom:1px solid #4a3a2a}.prebattle-v2-available{background:#00000080;border:2px solid #6a5a4a;border-radius:8px;padding:1rem;display:flex;flex-direction:column;overflow:hidden}.unit-roster{display:grid;grid-template-columns:repeat(2,1fr);gap:.75rem;overflow-y:auto;flex:1}.roster-unit{background:#2a1a0a;border:2px solid #4a3a2a;border-radius:8px;padding:.6rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:.6rem}.roster-unit:hover:not(.disabled){border-color:#ffd87f;background:#3a2a1a;transform:translateY(-2px);box-shadow:0 4px 12px #0006}.roster-unit.disabled{opacity:.4;cursor:not-allowed}.roster-unit-sprite{width:40px;height:40px;border-radius:50%;background:#0000004d;display:flex;align-items:center;justify-content:center;overflow:hidden}.roster-unit-sprite img{image-rendering:pixelated}.roster-unit-info{flex:1;min-width:0}.roster-unit-name{font-size:.9rem;font-weight:700;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.roster-unit-stats{font-size:.75rem;color:#aaa}.unit-speed{color:#0cf;font-weight:700}.roster-unit-element{font-size:.7rem;font-weight:700;padding:.2rem .5rem;border-radius:4px;text-transform:uppercase}.element-venus{background:#4a3a2a;color:#f4a460}.element-mars{background:#4a2a2a;color:#ff6b6b}.element-mercury{background:#2a3a4a;color:#6bb3ff}.element-jupiter{background:#3a2a4a;color:#b06bff}.element-neutral{background:#3a3a3a;color:#aaa}.roster-empty{grid-column:1 / -1;text-align:center;padding:2rem;color:#666;font-style:italic}.prebattle-v2-selected{display:flex;flex-direction:column;gap:1rem;overflow:hidden}.team-slots{display:flex;flex-direction:column;gap:.6rem;background:#00000080;border:2px solid #6a5a4a;border-radius:8px;padding:1rem}.team-slot{background:#1a0a00;border:2px dashed #4a3a2a;border-radius:8px;padding:.6rem .75rem;min-height:56px;display:flex;align-items:center;gap:.6rem;position:relative;transition:all .2s ease}.team-slot.filled{border-style:solid;border-color:#6a5a4a;background:#2a1a0a}.slot-badge{position:absolute;top:-8px;left:12px;background:linear-gradient(180deg,#ffd87f,#daa520);color:#1a0a00;font-size:.65rem;font-weight:700;padding:2px 8px;border-radius:10px;box-shadow:0 2px 4px #0006}.slot-order{font-size:1.4rem;font-weight:700;color:#ffd87f;width:28px;text-align:center;text-shadow:1px 1px 2px #000}.slot-sprite{width:40px;height:40px;border-radius:50%;background:#0000004d;display:flex;align-items:center;justify-content:center;overflow:hidden}.slot-sprite img{image-rendering:pixelated}.slot-unit-info{flex:1}.slot-unit-name{font-size:.95rem;font-weight:700;color:#fff}.slot-unit-speed{font-size:.8rem;color:#0cf}.slot-empty-text{color:#666;font-style:italic;font-size:.85rem}.remove-btn{background:#a33;border:none;color:#fff;width:26px;height:26px;border-radius:50%;cursor:pointer;font-size:1.1rem;line-height:1;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.remove-btn:hover{background:#f44;transform:scale(1.1)}.enemy-preview{background:#00000080;border:2px solid #6a5a4a;border-radius:8px;padding:.75rem}.enemy-portal-wrap{display:flex;justify-content:center}.loadout-preview{background:#00000080;border:2px solid #6a5a4a;border-radius:8px;padding:.75rem;display:flex;flex-direction:column;gap:.65rem}.loadout-columns{display:grid;grid-template-columns:1.2fr .8fr;gap:.75rem}.loadout-subtitle{font-size:.85rem;color:#ffd87f;margin-bottom:.35rem;text-transform:uppercase;letter-spacing:.02em}.gear-summary,.djinn-summary{display:flex;flex-direction:column;gap:.5rem}.gear-row{background:#1e1208;border:1px solid #4a3a2a;border-radius:8px;padding:.55rem;display:flex;flex-direction:column;gap:.35rem}.gear-row-header{display:flex;align-items:center;gap:.45rem}.gear-row-avatar{width:30px;height:30px;border-radius:50%;background:#0006;display:flex;align-items:center;justify-content:center;overflow:hidden}.gear-row-name{font-weight:700;color:#fff;font-size:.95rem}.gear-row-element{margin-left:auto;padding:.2rem .5rem;border-radius:6px;font-size:.75rem;text-transform:uppercase}.gear-tags{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:.35rem}.gear-tag{display:flex;flex-direction:column;gap:.15rem;padding:.4rem .5rem;border-radius:6px;border:1px dashed #4a3a2a;background:#00000059;font-size:.78rem;color:#ddd}.gear-tag.filled{border-style:solid;border-color:#6a5a4a;background:#ffd87f14}.gear-slot-label{font-size:.7rem;color:#c9ad7f;letter-spacing:.01em}.gear-item-name{font-weight:600;color:#fff;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.loadout-empty{background:#1e1208;border:1px dashed #4a3a2a;border-radius:8px;padding:.65rem;color:#8a7a6a;font-size:.85rem}.djinn-chips{display:flex;flex-direction:column;gap:.4rem}.djinn-chip{border:1px solid #4a3a2a;border-radius:8px;padding:.45rem .55rem;background:#1e1208}.djinn-chip.filled{background:linear-gradient(180deg,#ffd87f1f,#0006);border-color:#6a5a4a}.djinn-chip-row{display:flex;align-items:center;gap:.4rem;margin-bottom:.25rem}.djinn-slot-label{font-size:.75rem;color:#c9ad7f}.djinn-element-badge{margin-left:auto;padding:.15rem .45rem;border-radius:999px;font-size:.72rem;background:#00000059;border:1px solid rgba(255,255,255,.08)}.djinn-name{font-weight:700;color:#fff;font-size:.9rem}.djinn-note{font-size:.75rem;color:#8a7a6a}.prebattle-v2-selected .start-battle-btn{width:100%;padding:1rem;background:linear-gradient(180deg,#ffd87f,#f3c866);border:3px solid #aa8833;border-radius:8px;color:#1a0a00;font-size:1.15rem;font-weight:700;cursor:pointer;transition:all .2s ease;box-shadow:0 4px 12px #ffd87f4d}.prebattle-v2-selected .start-battle-btn:hover:not(:disabled){background:linear-gradient(180deg,#ffe8a0,#ffd87f);transform:translateY(-2px);box-shadow:0 6px 20px #ffd87f80}.prebattle-v2-selected .start-battle-btn:disabled{opacity:.5;cursor:not-allowed;background:linear-gradient(180deg,#8a7a6a,#6a5a4a);color:#4a3a2a;border-color:#4a3a2a;box-shadow:none}.prebattle-v2-footer{padding:.75rem 1.5rem;background:#0000004d;border-top:2px solid #4a3a2a;display:flex;justify-content:space-between;align-items:center}.cancel-btn{padding:.6rem 1.2rem;background:#3a2a1a;border:2px solid #6a5a4a;border-radius:8px;color:#ddd;font-size:.9rem;cursor:pointer;transition:all .2s ease}.cancel-btn:hover{background:#4a3a2a;border-color:#8b6a4a;color:#ffd87f}.keyboard-hints{font-size:.8rem;color:#8a7a6a}.keyboard-hints .key{background:#2a1a0a;border:1px solid #6a5a4a;padding:.15rem .4rem;border-radius:4px;font-family:monospace;color:#ffd87f}.unit-roster::-webkit-scrollbar{width:6px}.unit-roster::-webkit-scrollbar-track{background:#1a0a00;border-radius:3px}.unit-roster::-webkit-scrollbar-thumb{background:#6a5a4a;border-radius:3px}.unit-roster::-webkit-scrollbar-thumb:hover{background:#8b6a4a}@media (max-width: 900px){.prebattle-v2-layout{grid-template-columns:1fr;grid-template-rows:1fr auto}.prebattle-v2-container{height:auto;max-height:95vh}.unit-roster{max-height:200px}.loadout-columns{grid-template-columns:1fr}}.rewards-screen{position:fixed;top:0;left:0;width:100%;height:100%;max-height:100vh;background:linear-gradient(180deg,#0f2550,#1a3560);padding:16px;display:flex;align-items:center;justify-content:center;overflow-y:auto}.rewards-screen--golden-sun{background:linear-gradient(180deg,#1a0a00,#2a1a0a,#1a0a00)}.victory-sparkles{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden;z-index:5}.sparkle{position:absolute;width:8px;height:8px;background:radial-gradient(circle,#ffd87f 0%,#f3c866 50%,transparent 70%);border-radius:50%;animation:sparkle-fall 4s linear infinite;opacity:0;left:var(--left, 50%);animation-delay:var(--delay, 0s);box-shadow:0 0 6px #ffd87f}@keyframes sparkle-fall{0%{transform:translateY(-20px) scale(0);opacity:0}10%{opacity:1;transform:translateY(0) scale(1)}90%{opacity:.8}to{transform:translateY(100vh) scale(.5);opacity:0}}.party-display{display:flex;justify-content:center;gap:2rem;margin-bottom:1.5rem;animation:party-appear .8s ease-out .3s both}@keyframes party-appear{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.party-member{text-align:center;animation:member-appear .5s ease-out both;animation-delay:calc(.4s + var(--index, 0) * .1s)}@keyframes member-appear{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}.party-sprite{width:64px;height:64px;margin:0 auto .5rem;display:flex;align-items:center;justify-content:center;overflow:hidden;animation:bounce 1s ease-in-out infinite;animation-delay:calc(var(--index, 0) * .1s)}@keyframes bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.party-sprite img{width:100%;height:100%;object-fit:contain;image-rendering:pixelated}.party-name{font-size:.9rem;color:#fff;font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.8)}.rewards-screen--golden-sun .rewards-container .victory-banner,.rewards-screen--golden-sun .rewards-container .reward-card,.rewards-screen--golden-sun .rewards-container .items-panel,.rewards-screen--golden-sun .rewards-container .level-up-panel{background:linear-gradient(135deg,#4a3a2a,#3a2a1a);border:2px solid #8b6a4a;border-radius:8px}.rewards-screen--golden-sun .rewards-container .continue-btn{background:linear-gradient(180deg,#ffd87f,#f3c866);border:3px solid #aa8833;color:#1a0a00;box-shadow:0 4px 12px #ffd87f66}.rewards-screen--golden-sun .rewards-container .continue-btn:hover{background:linear-gradient(180deg,#ffe8a0,#ffd87f);box-shadow:0 6px 20px #ffd87f99;color:#1a0a00}.rewards-container{width:820px;max-width:100%;display:flex;flex-direction:column;gap:16px;animation:slideIn .5s ease-out}.rewards-container .victory-banner{background:#141e32e6;border:1px solid rgba(255,255,255,.25);box-shadow:0 4px 8px #00000080;padding:16px;text-align:center;animation:victoryPulse 2s ease-in-out infinite}@keyframes victoryPulse{0%,to{box-shadow:0 4px 8px #00000080}50%{box-shadow:0 4px 8px #00000080,0 0 20px #ffd77f80}}.rewards-container .victory-banner h1{font-size:38px;color:#ffd87f;text-shadow:2px 2px 4px rgba(0,0,0,.8),0 0 10px #FFD87F;animation:textGlow 1.5s ease-in-out infinite;margin:0}.victory-sub{margin-top:6px;color:#cdd9f5;font-size:14px;letter-spacing:.02em}@keyframes textGlow{0%,to{text-shadow:2px 2px 4px rgba(0,0,0,.8)}50%{text-shadow:2px 2px 4px rgba(0,0,0,.8),0 0 15px #FFD87F}}.rewards-container .rewards-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}.rewards-container .reward-card{background:#141e32e6;border:1px solid rgba(255,255,255,.25);box-shadow:0 4px 8px #00000080;padding:12px;display:flex;align-items:center;gap:12px;animation:cardFadeIn .5s ease-out backwards}.rewards-container .reward-card:nth-child(1){animation-delay:.1s}.rewards-container .reward-card:nth-child(2){animation-delay:.2s}@keyframes cardFadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.rewards-container .reward-icon{width:44px;height:44px;background:#0000004d;border:1px solid rgba(255,255,255,.25);display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0}.rewards-container .reward-details{flex:1}.rewards-container .reward-label{font-size:12px;color:#ffd87f;text-shadow:1px 1px 2px rgba(0,0,0,.8);margin-bottom:4px;text-transform:uppercase}.rewards-container .reward-value{font-size:18px;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.8)}.rewards-container .reward-value.highlight{color:#ffd87f;animation:valueCount 1s ease-out}.rewards-container .reward-subtext{font-size:10px;color:#ffffffb3;margin-top:4px}@keyframes valueCount{0%{opacity:0;transform:scale(1.5)}to{opacity:1;transform:scale(1)}}.rewards-container .items-panel{background:#141e32e6;border:1px solid rgba(255,255,255,.25);box-shadow:0 4px 8px #00000080;padding:14px;animation:cardFadeIn .5s ease-out .3s backwards}.rewards-container .items-panel h2{font-size:18px;color:#ffd87f;text-shadow:1px 1px 2px rgba(0,0,0,.8);margin-bottom:16px;text-align:center}.rewards-container .items-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px}.rewards-container .item-card{background:#0000004d;border:1px solid rgba(255,255,255,.2);padding:10px;display:flex;align-items:center;gap:8px;transition:all .2s}.rewards-container .item-card:hover{background:#4a7ab833;border-color:#fff6;transform:translateY(-2px)}.rewards-container .item-icon{flex-shrink:0}.rewards-container .item-name{font-size:12px;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.8);flex:1}.rewards-container .item-quantity{font-size:12px;color:#ffd87f;text-shadow:1px 1px 2px rgba(0,0,0,.8)}.recruitment-panel{margin:16px 0;padding:18px;background:linear-gradient(135deg,#1a2a3a,#0f1a25);border:2px solid #4a9eff;border-radius:8px;text-align:center;box-shadow:0 8px 20px #00000059}.recruitment-panel h2{color:#4a9eff;font-size:clamp(1.2rem,2vw,1.5rem);margin-bottom:1rem;text-shadow:0 0 10px rgba(74,158,255,.5)}.recruitment-unit{display:flex;align-items:center;justify-content:center;gap:1.5rem;flex-wrap:wrap}.recruitment-details{display:flex;flex-direction:column;gap:.4rem;align-items:flex-start}.recruitment-name{font-size:clamp(1.1rem,1.8vw,1.3rem);font-weight:700;color:#fff}.recruitment-level{font-size:clamp(.9rem,1.4vw,1rem);color:#4a9eff}.recruitment-element{font-size:clamp(.85rem,1.2vw,.95rem);color:#aaa;text-transform:uppercase}.recruitment-message{font-size:clamp(.9rem,1.4vw,1rem);color:#fff;font-style:italic;margin-top:.25rem}.djinn-panel{margin:16px 0;padding:18px;background:linear-gradient(135deg,#2a1a3a,#1f0f25);border:2px solid #ff6b6b;border-radius:8px;text-align:center;box-shadow:0 8px 20px #00000059}.djinn-panel h2{color:#ff6b6b;font-size:clamp(1.2rem,2vw,1.5rem);margin-bottom:1rem;text-shadow:0 0 10px rgba(255,107,107,.5)}.djinn-acquisition{display:flex;flex-direction:column;gap:.5rem;align-items:center}.djinn-name{font-size:clamp(1.1rem,1.8vw,1.3rem);font-weight:700;color:#fff}.djinn-element{font-size:clamp(.9rem,1.4vw,1rem);color:#ff6b6b;text-transform:uppercase}.djinn-message{font-size:clamp(.9rem,1.4vw,1rem);color:#fff;font-style:italic;margin-top:.25rem}.rewards-container .level-up-panel{background:linear-gradient(135deg,#50d8504d,#28b0284d);border:2px solid #50D850;box-shadow:0 4px 8px #00000080,0 0 30px #50d85080;padding:18px;text-align:center;animation:levelUpAppear .8s ease-out .5s backwards}@keyframes levelUpAppear{0%{opacity:0;transform:scale(1.2)}to{opacity:1;transform:scale(1)}}.rewards-container .level-up-panel h2{font-size:20px;color:#50d850;text-shadow:1px 1px 2px rgba(0,0,0,.8),0 0 15px #50D850;margin-bottom:16px;animation:levelUpPulse 1s ease-in-out infinite}@keyframes levelUpPulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.rewards-container .level-up-units{display:flex;justify-content:center;gap:16px;flex-wrap:wrap}.rewards-container .level-up-unit{display:flex;flex-direction:column;align-items:center;gap:8px}.rewards-container .level-up-sprite{width:48px;height:48px;background:#0000004d;border:2px solid #50D850;display:flex;align-items:center;justify-content:center;box-shadow:0 0 15px #50d85080;animation:levelUpBounce .6s ease-out backwards}@keyframes levelUpBounce{0%{transform:translateY(-30px) scale(.5);opacity:0}50%{transform:translateY(5px) scale(1.1)}to{transform:translateY(0) scale(1);opacity:1}}.rewards-container .level-up-name{font-size:14px;color:#50d850;text-shadow:1px 1px 2px rgba(0,0,0,.8);font-weight:700}.rewards-container .level-up-arrow{font-size:12px;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.8)}.rewards-container .level-up-stats{display:flex;flex-wrap:wrap;gap:4px;justify-content:center;font-size:10px;color:#ffffffe6}.rewards-container .level-up-stats span{background:#0000004d;padding:2px 6px;border-radius:4px}.rewards-container .level-up-abilities{font-size:10px;color:#fffc;font-style:italic;margin-top:4px}.rewards-container .continue-container{display:flex;justify-content:center;animation:cardFadeIn .4s ease-out 1s backwards}.rewards-container .continue-btn{background:#141e32e6;border:2px solid #FFD87F;color:#ffd87f;font-size:16px;font-weight:700;padding:10px 28px;cursor:pointer;transition:all .2s;text-shadow:1px 1px 2px rgba(0,0,0,.8);box-shadow:0 4px 8px #00000080;animation:continuePulse 2s ease-in-out infinite;text-transform:uppercase}@keyframes continuePulse{0%,to{box-shadow:0 4px 8px #00000080;border-color:#ffd87f}50%{box-shadow:0 4px 8px #00000080,0 0 20px #ffd87f;border-color:#fff}}.rewards-container .continue-btn:hover{background:#ffd87f;color:#0f2550;transform:translateY(-4px);box-shadow:0 12px 24px #ffd77f80}.rewards-container .continue-btn:active{transform:translateY(-2px)}.rewards-container .continue-btn:focus{outline:3px solid #fff;outline-offset:4px}@media (prefers-reduced-motion: reduce){.rewards-container *{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}@media (max-width: 768px){.rewards-container .rewards-grid,.rewards-container .items-grid{grid-template-columns:1fr}.rewards-container .level-up-units{flex-direction:column}}.shop-screen-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000;padding:24px}.shop-screen-container{width:820px;max-width:100%;max-height:90vh;background:linear-gradient(180deg,#0f2550,#1a3560);border:2px solid rgba(255,255,255,.25);box-shadow:0 6px 24px #00000073;padding:14px;display:flex;flex-direction:column;gap:12px;overflow-y:auto;animation:slideIn .3s ease-out}.shop-header{display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid rgba(255,255,255,.3);padding-bottom:16px}.shop-header h1{font-size:22px;color:#ffd87f;text-shadow:1px 1px 2px rgba(0,0,0,.6);margin:0}.close-btn{background:transparent;border:1px solid rgba(255,255,255,.25);color:#fff;font-size:22px;width:32px;height:32px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;line-height:1}.shop-gold{background:#141e32e6;border:1px solid rgba(255,215,127,.4);padding:8px 12px;display:flex;justify-content:space-between;align-items:center;border-radius:4px}.gold-label{font-size:14px;color:#ffd87f;text-shadow:1px 1px 2px rgba(0,0,0,.8);font-weight:700}.gold-value{font-size:18px;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.8);font-weight:700}.shop-error{background:#c832324d;border:2px solid #C83232;color:#fff;padding:12px;text-align:center;border-radius:4px}.shop-tabs{display:flex;gap:8px;border-bottom:2px solid rgba(255,255,255,.3)}.shop-content{flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:12px}.shop-items-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:10px}.shop-item-card{background:#141e32e6;border:1px solid rgba(255,255,255,.25);padding:10px;display:flex;flex-direction:column;gap:8px;transition:all .2s}.item-icon{width:48px;height:48px;margin:0 auto;display:flex;align-items:center;justify-content:center;background:#0003;border:1px solid rgba(255,255,255,.25);border-radius:6px}.item-name{font-size:14px;color:#ffd87f;text-shadow:1px 1px 2px rgba(0,0,0,.5);font-weight:700;text-align:center}.item-price{font-size:14px;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.8);text-align:center;font-weight:700}.buy-btn,.sell-btn{background:#4a7ab84d;border:1px solid #4A7AB8;color:#fff;font-size:12px;font-weight:700;padding:8px 12px;cursor:pointer;transition:all .2s;text-transform:uppercase}.sell-btn{background:#c832324d;border-color:#c83232}.sell-btn:hover{background:#c83232;border-color:#e04040}.sell-confirm{display:flex;gap:8px}.confirm-btn,.cancel-btn{flex:1;padding:8px 16px;font-size:12px;font-weight:700;cursor:pointer;transition:all .2s;border:2px solid;text-transform:uppercase}@media (max-width: 768px){.shop-screen-container{width:100%;padding:16px}.shop-items-grid{grid-template-columns:1fr}}@media (prefers-reduced-motion: reduce){.shop-screen-container,.shop-item-card{animation:none;transition:none}}.tower-hub{display:flex;flex-direction:column;gap:1rem;padding:2rem;background:linear-gradient(135deg,#0b0f1a,#1a2133);color:#f4f7ff;min-height:calc(100vh - 4rem)}.tower-card{background:#101623d9;border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:1.5rem;box-shadow:0 10px 25px #00000040}.tower-card header{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:1rem;margin-bottom:1.5rem}.tower-card .label{text-transform:uppercase;font-size:.75rem;letter-spacing:.08em;opacity:.7;margin-bottom:.25rem}.tower-card .value{font-size:1.25rem;font-weight:600}.tower-card .value.rest{color:#4fbe79}.tower-card .value.boss{color:#ff7283}.tower-card .value.normal{color:#7db7ff}.tower-card .timeline{background:#ffffff08;border-radius:8px;padding:1rem}.next-reward{margin-top:1rem;padding-top:1rem;border-top:1px solid rgba(255,255,255,.08)}.reward-row{display:flex;gap:.5rem;align-items:center;color:#9fc4ff;font-size:.9rem}.floor-display{display:flex;flex-direction:column;gap:.5rem}.floor-pill{display:inline-flex;align-items:center;gap:.35rem;padding:.2rem .6rem;border-radius:999px;font-size:.7rem;text-transform:uppercase;letter-spacing:.05em;width:fit-content}.floor-pill.boss{background:#ff728329;color:#ff7283}.floor-pill.rest{background:#4fbe7929;color:#4fbe79}.floor-pill.normal{background:#7db7ff29;color:#7db7ff}.floor-pill.reward{background:#ffeeaa29;color:#ffeaaa}.tower-actions{display:flex;flex-wrap:wrap;gap:.75rem;margin-top:1.5rem}.tower-actions button{border:none;border-radius:8px;padding:.75rem 1.5rem;cursor:pointer;font-weight:600;background:#ffffff14;color:inherit;transition:transform .1s ease,background .2s ease}.tower-actions button.primary{background:linear-gradient(120deg,#6f9bff,#3468ff)}.tower-actions button.ghost{background:transparent;border:1px solid rgba(255,255,255,.15)}.tower-actions button:disabled{opacity:.4;cursor:not-allowed}.tower-actions button:not(:disabled):hover{transform:translateY(-1px);background:#ffffff2e}.tower-loadout-actions{margin-top:1rem;display:flex;flex-direction:column;gap:.5rem;font-size:.85rem;color:#fffc}.tower-rest-buttons{display:flex;gap:.5rem;flex-wrap:wrap}.tower-rest-buttons button{border-radius:6px;border:1px solid rgba(255,255,255,.15);background:#ffffff0d;color:inherit;padding:.4rem .9rem;cursor:pointer;font-size:.85rem}.tower-card.stats ul{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.5rem}.tower-card.stats li{display:flex;justify-content:space-between;font-size:.95rem;padding:.5rem 0;border-bottom:1px dotted rgba(255,255,255,.08)}.tower-card.stats li span:last-child{font-weight:600}.tower-card.party{padding-bottom:1rem}.party-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}.party-unit{background:#ffffff0a;border-radius:10px;padding:.75rem;border:1px solid rgba(255,255,255,.08)}.unit-header{display:flex;justify-content:space-between;font-size:.9rem;margin-bottom:.4rem}.hp-bar{height:6px;background:#ffffff14;border-radius:999px;overflow:hidden;margin-bottom:.4rem}.hp-bar div{height:100%;background:linear-gradient(90deg,#45f7b5,#14c48b)}.djinn-badges{display:flex;flex-direction:column;gap:.25rem}.djinn-pill{display:inline-flex;align-items:center;gap:.35rem;padding:.2rem .6rem;border-radius:999px;font-size:.7rem;background:#ffffff14;border:1px solid rgba(255,255,255,.12)}.djinn-pill.state-Set{border-color:#5be4bf;color:#5be4bf}.djinn-pill.state-Standby{border-color:#ffce5c;color:#ffce5c}.djinn-pill.state-Recovery{border-color:#ff7a7a;color:#ff7a7a}.tower-card.record{margin-top:1rem}.record-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:1rem}.record-grid>div{display:flex;flex-direction:column;gap:.3rem;padding:.75rem;background:#ffffff08;border-radius:8px;border:1px solid rgba(255,255,255,.08)}.tower-modal{position:fixed;inset:0;background:#04060cbf;display:flex;align-items:center;justify-content:center;z-index:1000}.tower-modal-content{background:#11182a;border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:1.5rem;width:min(90vw,420px);box-shadow:0 15px 35px #00000073}.tower-modal-content p{margin-top:0;margin-bottom:1rem;font-size:1rem}.tower-modal-actions{display:flex;gap:.75rem;justify-content:flex-end}.tower-modal-actions button{border:none;border-radius:6px;padding:.65rem 1.2rem;cursor:pointer}.tower-modal-actions .primary{background:linear-gradient(120deg,#e3a85b,#f9c976);color:#1a2133;font-weight:600}.party-management-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000;padding:16px}.party-management-container{width:900px;max-width:100%;max-height:90vh;background:linear-gradient(180deg,#0f2550,#1a3560);border:2px solid rgba(255,255,255,.25);box-shadow:0 6px 24px #00000073;padding:14px;display:flex;flex-direction:column;gap:12px;animation:slideIn .3s ease-out;overflow:hidden}.party-management-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(255,255,255,.2);padding-bottom:10px}.party-management-header h1{font-size:24px;color:#ffd87f;text-shadow:1px 1px 2px rgba(0,0,0,.6);margin:0}.party-instructions{background:#141e32e6;border:2px solid rgba(255,215,127,.5);padding:12px 16px;border-radius:4px}.party-instructions p{color:#ffffffe6;margin:0;font-size:14px}.party-content{display:flex;flex-direction:column;gap:16px;overflow-y:auto;flex:1;min-height:0}.party-section{display:flex;flex-direction:column;gap:16px}.party-section h2{font-size:18px;color:#ffd87f;text-shadow:1px 1px 2px rgba(0,0,0,.6);margin:0}.party-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:10px}.bench-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px}.party-member-card,.bench-unit-card{background:#141e32e6;border:1px solid rgba(255,255,255,.25);padding:10px;display:flex;flex-direction:column;align-items:center;gap:8px;cursor:pointer;transition:all .2s;position:relative}.party-member-card:hover,.bench-unit-card:hover{background:#4a7ab833;border-color:#ffffff80;transform:translateY(-2px)}.party-member-card.selected,.bench-unit-card.selected{border-color:#ffd87f;background:#ffd77f1a}.member-slot-number{position:absolute;top:8px;left:8px;font-size:11px;color:#fff9;text-transform:uppercase}.member-icon{width:52px;height:52px;border-radius:50%;background:#4a7ab84d;border:1px solid rgba(255,255,255,.25);display:flex;align-items:center;justify-content:center}.member-initial{font-size:32px;font-weight:700;color:#fff;text-shadow:2px 2px 4px rgba(0,0,0,.8)}.member-info{display:flex;flex-direction:column;align-items:center;gap:4px;width:100%}.member-name{font-size:14px;color:#ffd87f;font-weight:700;text-align:center}.member-level{font-size:12px;color:#ffffffe6}.member-element{font-size:11px;color:#ffffffb3;text-transform:uppercase}.member-role{font-size:10px;color:#fff9;text-align:center;font-style:italic}.selection-indicator{position:absolute;bottom:8px;left:50%;transform:translate(-50%);background:#ffd87f;color:#000;padding:4px 8px;border-radius:4px;font-size:11px;font-weight:700;text-transform:uppercase}.no-bench-message{color:#ffffff80;font-style:italic;padding:24px;text-align:center}.party-error{color:#fff;text-align:center;padding:24px}.swap-actions{display:flex;gap:12px;justify-content:center;padding-top:16px;border-top:2px solid rgba(255,255,255,.3)}.swap-btn,.cancel-btn{padding:12px 24px;font-size:16px;font-weight:700;cursor:pointer;transition:all .2s;border:2px solid;text-transform:uppercase}.swap-btn{background:#4a7ab84d;border-color:#4a7ab8;color:#fff}.swap-btn:hover{background:#4a7ab8;border-color:#ffd87f;color:#ffd87f}.unit-details{background:#141e3280;border:2px solid rgba(255,215,127,.3);padding:20px;border-radius:4px;max-height:500px;overflow-y:auto}.detail-grid{display:flex;flex-direction:column;gap:12px}.detail-row{display:flex;justify-content:space-between;padding:8px 0}.detail-label{color:#ffffffb3;font-weight:700}.detail-value{color:#fff;font-weight:700}.detail-divider{height:1px;background:#fff3;margin:8px 0}.detail-section{margin-top:12px}.detail-section h3{color:#ffd87f;font-size:16px;margin:0 0 8px}.ability-list{display:flex;flex-direction:column;gap:6px;max-height:200px;overflow-y:auto}.ability-item{display:flex;justify-content:space-between;padding:6px 10px;background:#141e32cc;border-left:2px solid #4A7AB8}.ability-name{color:#fff}.ability-cost{color:#ffd87f;font-weight:700}.member-stats{font-size:14px;color:#ffffffe6}.active-badge{background:#4caf50;color:#fff;padding:4px 8px;border-radius:4px;font-size:11px;font-weight:700;text-transform:uppercase;margin-top:4px}@media (max-width: 1024px){.party-grid{grid-template-columns:repeat(2,1fr)}}@media (max-width: 768px){.party-management-container{width:100%;padding:16px}.party-grid{grid-template-columns:1fr}.bench-grid{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}}.shop-equip-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000d9;display:flex;align-items:center;justify-content:center;z-index:1000;padding:24px}.shop-equip-container{width:1000px;max-width:100%;max-height:90vh;background:linear-gradient(180deg,#0f2550,#1a3560);border:3px solid rgba(255,255,255,.3);box-shadow:0 8px 32px #0009;padding:24px;display:flex;flex-direction:column;gap:20px;overflow-y:auto;animation:slideIn .3s ease-out}.shop-equip-header{display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid rgba(255,255,255,.3);padding-bottom:16px}.shop-equip-header h1{font-size:32px;color:#ffd87f;text-shadow:2px 2px 4px rgba(0,0,0,.8);margin:0}.shop-equip-gold{background:#141e32e6;border:2px solid rgba(255,215,127,.5);padding:12px 20px;display:flex;justify-content:space-between;align-items:center;border-radius:4px}.gold-label{font-size:16px;color:#ffd87f;text-shadow:1px 1px 2px rgba(0,0,0,.8);font-weight:700}.gold-value{font-size:24px;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.8);font-weight:700}.shop-equip-error{background:#c832324d;border:2px solid #C83232;color:#fff;padding:12px;text-align:center;border-radius:4px}.shop-equip-tabs{display:flex;gap:8px;border-bottom:2px solid rgba(255,255,255,.3)}.tier-filter-bar{display:flex;align-items:center;gap:8px;padding:8px 0;color:#dbe7ff}.tier-filter-label{font-weight:600;letter-spacing:.02em}.tier-filter-buttons{display:flex;gap:6px;flex-wrap:wrap}.tier-filter-btn{background:#ffffff14;border:1px solid rgba(255,255,255,.15);color:#eaf2ff;padding:6px 10px;border-radius:4px;cursor:pointer;transition:all .15s ease-in-out;font-weight:600;letter-spacing:.01em}.tier-filter-btn:hover{border-color:#ffd87f;color:#ffd87f}.tier-filter-btn.active{background:#ffd87f1f;border-color:#ffd87f;color:#ffd87f;box-shadow:0 0 10px #ffd87f59}.tab-btn{background:transparent;border:none;border-bottom:3px solid transparent;color:#ffffffb3;font-size:16px;font-weight:700;padding:12px 24px;cursor:pointer;transition:all .2s;text-transform:uppercase}.tab-btn:hover{color:#fff;background:#ffffff0d}.tab-btn.active{color:#ffd87f;border-bottom-color:#ffd87f}.shop-equip-content{flex:1;overflow-y:auto;min-height:400px}.shop-tab-content{display:flex;flex-direction:column;gap:24px}.shop-locked,.shop-empty{text-align:center;padding:48px;color:#ffffff80;font-style:italic;font-size:18px}.shop-items-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}.shop-item-card{background:#141e32e6;border:2px solid rgba(255,255,255,.3);padding:16px;display:flex;flex-direction:column;gap:12px;transition:all .2s}.shop-item-card:hover:not(.unaffordable){background:#4a7ab833;border-color:#ffffff80;transform:translateY(-2px)}.shop-item-card.unaffordable{opacity:.6}.item-icon{width:64px;height:64px;margin:0 auto;display:flex;align-items:center;justify-content:center;background:#0000004d;border:2px solid rgba(255,255,255,.3)}.item-details{display:flex;flex-direction:column;gap:8px}.item-name{font-size:18px;color:#ffd87f;text-shadow:1px 1px 2px rgba(0,0,0,.8);font-weight:700;text-align:center}.item-stats{display:flex;flex-wrap:wrap;gap:4px;justify-content:center}.stat-badge{background:#0000004d;border:1px solid rgba(255,255,255,.2);padding:4px 8px;border-radius:4px;font-size:11px;color:#ffffffe6;text-transform:uppercase}.item-price{font-size:16px;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.8);text-align:center;font-weight:700}.buy-btn{background:#4a7ab84d;border:2px solid #4A7AB8;color:#fff;font-size:14px;font-weight:700;padding:10px 20px;cursor:pointer;transition:all .2s;text-transform:uppercase}.buy-btn:hover:not(:disabled){background:#4a7ab8;border-color:#ffd87f;color:#ffd87f}.buy-btn:disabled{opacity:.5;cursor:not-allowed}.starter-kits-section,.unit-store-section,.shop-general-section{margin-top:16px;padding-top:16px;border-top:1px solid rgba(255,255,255,.2)}.starter-kits-section h2,.unit-store-section h2,.shop-general-section h2{margin-bottom:12px;font-size:20px;color:#ffd87f;text-transform:uppercase;letter-spacing:.04em}.equip-tab-content{display:flex;flex-direction:column;height:100%}.equip-layout{display:grid;grid-template-columns:250px 1fr;gap:20px;height:100%}.unit-selector-panel{background:#141e32e6;border:2px solid rgba(255,255,255,.3);padding:16px;display:flex;flex-direction:column;gap:12px}.unit-selector-panel h2{font-size:18px;color:#ffd87f;text-shadow:1px 1px 2px rgba(0,0,0,.8);margin:0 0 8px;text-align:center}.unit-list{display:flex;flex-direction:column;gap:8px}.unit-card{background:#0000004d;border:2px solid rgba(255,255,255,.2);padding:12px;cursor:pointer;transition:all .2s;border-radius:4px}.unit-card:hover{background:#4a7ab833;border-color:#fff6}.unit-card.selected{background:#4a7ab866;border:2px solid #FFD87F;box-shadow:0 0 8px #ffd77f4d}.unit-info{display:flex;flex-direction:column;gap:4px}.unit-name{font-size:16px;color:#fff;font-weight:700}.unit-level{font-size:12px;color:#ffffffb3}.equipment-management-panel{display:grid;grid-template-columns:1fr 1fr;gap:20px}.equipment-slots-section{background:#141e32e6;border:2px solid rgba(255,255,255,.3);padding:16px;display:flex;flex-direction:column;gap:16px}.equipment-slots-section h2{font-size:18px;color:#ffd87f;text-shadow:1px 1px 2px rgba(0,0,0,.8);margin:0;text-align:center}.equipment-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.equipment-slot{background:#0000004d;border:2px solid rgba(255,255,255,.2);padding:12px;cursor:pointer;transition:all .2s;border-radius:4px;display:flex;flex-direction:column;gap:8px;align-items:center;text-align:center}.equipment-slot:hover{background:#4a7ab833;border-color:#fff6}.equipment-slot.selected{background:#4a7ab866;border:2px solid #FFD87F;box-shadow:0 0 8px #ffd77f4d}.equipment-label{font-size:10px;color:#fff9;text-transform:uppercase;font-weight:700}.equipment-value{font-size:14px;color:#fff;font-weight:700}.equipment-value.empty{color:#fff6;font-style:italic}.equipment-bonuses{display:flex;flex-wrap:wrap;gap:4px;justify-content:center}.bonus-badge{background:#0000004d;border:1px solid rgba(255,255,255,.2);padding:2px 6px;border-radius:3px;font-size:10px;color:#ffffffe6}.unequip-btn{background:#c832324d;border:2px solid #C83232;color:#fff;font-size:11px;font-weight:700;padding:6px 12px;cursor:pointer;transition:all .2s;text-transform:uppercase;border-radius:3px;width:100%;margin-top:4px}.stat-preview{background:#0006;border:1px solid rgba(255,255,255,.2);padding:12px;border-radius:4px}.stat-preview-title{font-size:12px;color:#ffd87f;font-weight:700;text-align:center;margin-bottom:8px;text-transform:uppercase}.stat-preview-values{display:flex;flex-direction:column;gap:4px;font-size:12px;color:#ffffffe6}.stat-preview-values span{display:flex;justify-content:space-between}.equipment-inventory-section{background:#141e32e6;border:2px solid rgba(255,255,255,.3);padding:16px;display:flex;flex-direction:column;gap:12px;overflow-y:auto}.slot-indicator{background:#4a7ab84d;border:1px solid #4A7AB8;padding:8px 12px;border-radius:4px;font-size:14px;color:#fff;text-align:center}.slot-indicator strong{color:#ffd87f}.inventory-empty,.slot-prompt{text-align:center;padding:48px 24px;color:#ffffff80;font-style:italic;font-size:16px}.inventory-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px}.inventory-item{background:#0000004d;border:2px solid rgba(255,255,255,.2);padding:12px;cursor:pointer;transition:all .2s;border-radius:4px;display:flex;flex-direction:column;gap:8px;align-items:center;text-align:center}.inventory-item:hover{background:#4a7ab833;border-color:#fff6;transform:translateY(-2px)}.inventory-item-icon{width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:#0000004d;border:1px solid rgba(255,255,255,.2)}.inventory-item-name{font-size:12px;color:#ffd87f;font-weight:700}.inventory-item-stats{font-size:10px;color:#ffffffb3}@media (max-width: 1024px){.equip-layout{grid-template-columns:200px 1fr}.equipment-management-panel{grid-template-columns:1fr}}@media (max-width: 768px){.shop-equip-container{width:100%;padding:16px}.shop-items-grid,.equip-layout,.equipment-grid{grid-template-columns:1fr}}@media (prefers-reduced-motion: reduce){.shop-equip-container,.shop-item-card,.equipment-slot,.inventory-item{animation:none;transition:none}}.djinn-detail-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000e6;display:flex;align-items:center;justify-content:center;z-index:2000;padding:24px}.djinn-detail-container{width:600px;max-width:100%;max-height:90vh;background:linear-gradient(180deg,#0f2550,#1a3560);border:3px solid rgba(255,255,255,.3);box-shadow:0 8px 32px #0009;padding:24px;display:flex;flex-direction:column;gap:20px;overflow-y:auto;animation:slideIn .3s ease-out}@keyframes slideIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.djinn-detail-header{display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid rgba(255,255,255,.3);padding-bottom:16px}.djinn-detail-header h2{font-size:28px;color:#ffd87f;text-shadow:2px 2px 4px rgba(0,0,0,.8);margin:0}.djinn-detail-content{display:flex;flex-direction:column;gap:24px}.djinn-main-info{display:flex;gap:20px;align-items:center}.djinn-icon-large{width:100px;height:100px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:3px solid rgba(255,255,255,.3);flex-shrink:0}.djinn-initial-large{font-size:48px;font-weight:700;color:#fff;text-shadow:2px 2px 4px rgba(0,0,0,.8)}.djinn-details{display:flex;flex-direction:column;gap:8px;flex:1}.detail-row{display:flex;gap:12px}.detail-label{color:#ffd87f;font-weight:700;min-width:80px}.detail-value{color:#fff}.djinn-description{background:#141e32e6;border:2px solid rgba(255,255,255,.2);padding:16px;border-radius:4px}.djinn-description p{color:#ffffffe6;line-height:1.6;margin:0}.djinn-unleash{background:#141e32e6;border:2px solid rgba(255,215,127,.5);padding:16px;border-radius:4px}.djinn-unleash h3{color:#ffd87f;margin:0 0 8px;font-size:18px}.djinn-unleash p{color:#ffffffe6;line-height:1.6;margin:0}.djinn-summon-effect{background:#141e32e6;border:2px solid rgba(255,215,127,.5);padding:16px;border-radius:4px}.djinn-summon-effect h3{color:#ffd87f;margin:0 0 8px;font-size:18px}.djinn-summon-effect p{color:#ffffffe6;line-height:1.6;margin:0}.djinn-assignment{background:#141e32e6;border:2px solid rgba(255,255,255,.2);padding:16px;border-radius:4px}.djinn-assignment h3{color:#ffd87f;margin:0 0 16px;font-size:18px}.slot-buttons{display:flex;gap:12px;margin-bottom:12px}.slot-btn{flex:1;background:#141e32e6;border:2px solid rgba(255,255,255,.3);color:#fff;padding:12px;cursor:pointer;transition:all .2s;display:flex;flex-direction:column;align-items:center;gap:8px}.slot-btn:hover:not(:disabled){background:#4a7ab833;border-color:#ffffff80}.slot-btn.active{background:#ffd77f33;border-color:#ffd87f}.slot-btn.occupied:not(.active){opacity:.6}.slot-btn:disabled{opacity:.5;cursor:not-allowed}.slot-number{font-size:12px;color:#ffffffb3;text-transform:uppercase}.slot-djinn-name{font-size:14px;color:#ffd87f;font-weight:700}.slot-empty{font-size:12px;color:#ffffff80;font-style:italic}.unequip-btn{width:100%;background:#c832324d;border:2px solid #C83232;color:#fff;padding:10px;cursor:pointer;transition:all .2s;font-weight:700}.unequip-btn:hover{background:#c83232;border-color:#e04040}.djinn-synergy-preview{background:#141e32e6;border:2px solid rgba(74,122,184,.5);padding:16px;border-radius:4px}.djinn-synergy-preview h3{color:#4a7ab8;margin:0 0 12px;font-size:18px}.synergy-info{display:flex;flex-direction:column;gap:8px}.synergy-row{display:flex;justify-content:space-between;color:#ffffffe6}.synergy-value{color:#4a7ab8;font-weight:700}@media (max-width: 768px){.djinn-detail-container{width:100%;padding:16px}.djinn-main-info{flex-direction:column;align-items:center}.slot-buttons{flex-direction:column}}.djinn-collection-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000;padding:16px}.djinn-collection-container{width:780px;max-width:100%;max-height:90vh;background:linear-gradient(180deg,#0f2550,#1a3560);border:2px solid rgba(255,255,255,.25);box-shadow:0 6px 24px #00000073;padding:14px;display:flex;flex-direction:column;gap:12px;animation:slideIn .25s ease-out;overflow:hidden}.djinn-collection-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(255,255,255,.2);padding-bottom:8px}.djinn-collection-header h1{font-size:24px;color:#ffd87f;text-shadow:1px 1px 2px rgba(0,0,0,.6);margin:0}.djinn-stats{display:flex;gap:12px;background:#141e32e6;border:1px solid rgba(255,215,127,.4);padding:8px 10px;border-radius:4px}.stat-item{display:flex;gap:8px}.stat-label{color:#ffd87f;font-weight:700}.stat-value{color:#fff;font-weight:700}.djinn-collection-content{display:flex;flex-direction:column;gap:16px;overflow-y:auto;flex:1;min-height:0}.djinn-element-section{display:flex;flex-direction:column;gap:16px}.element-header{font-size:24px;font-weight:700;text-shadow:2px 2px 4px rgba(0,0,0,.8);margin:0}.no-djinn-message{color:#ffffff80;font-style:italic;padding:24px;text-align:center}.djinn-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px}.djinn-card{background:#141e32e6;border:1px solid rgba(255,255,255,.25);padding:10px;display:flex;flex-direction:column;align-items:center;gap:8px;cursor:pointer;transition:all .2s}.djinn-card:hover{background:#4a7ab833;border-color:#ffffff80;transform:translateY(-2px)}.djinn-card.equipped{border-color:#ffd87f;background:#ffd77f1a}.djinn-card.set{border-left:4px solid #4CAF50}.djinn-card.standby{border-left:4px solid #FF9800}.djinn-card.recovery{border-left:4px solid #F44336}.djinn-icon{width:64px;height:64px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:2px solid rgba(255,255,255,.3)}.djinn-initial{font-size:32px;font-weight:700;color:#fff;text-shadow:2px 2px 4px rgba(0,0,0,.8)}.djinn-info{display:flex;flex-direction:column;align-items:center;gap:4px;width:100%}.djinn-name{font-size:18px;color:#ffd87f;font-weight:700;text-align:center}.djinn-tier{font-size:12px;color:#ffffffb3;text-transform:uppercase}.djinn-status{font-size:11px;color:#4caf50;font-weight:700;margin-top:4px}.djinn-error{color:#fff;text-align:center;padding:24px}@media (max-width: 768px){.djinn-collection-container{width:100%;padding:16px}.djinn-grid{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}}.pause-overlay{position:fixed;inset:0;background:#000000d9;backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:2000;animation:pauseFadeIn .2s ease-out}@keyframes pauseFadeIn{0%{opacity:0}to{opacity:1}}.pause-status-bar{position:absolute;top:20px;right:20px;background:#000c;border:2px solid #6a5a4a;border-radius:8px;padding:.75rem 1rem;display:flex;gap:2rem;font-size:.9rem}.status-item{display:flex;align-items:center;gap:.5rem}.status-label{color:#8a7a6a}.status-value{color:#ffd87f;font-weight:700}.pause-menu{background:linear-gradient(135deg,#3a2a1a,#2a1a0a);border:3px solid #8b6a4a;border-radius:12px;padding:2rem;min-width:400px;max-width:90vw;box-shadow:0 20px 60px #000c,inset 0 1px #ffd87f33;animation:pauseSlideUp .3s ease-out;outline:none}@keyframes pauseSlideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.pause-title{text-align:center;font-size:2rem;color:#ffd87f;margin-bottom:2rem;text-shadow:0 2px 4px rgba(0,0,0,.5);letter-spacing:2px}.menu-options{display:flex;flex-direction:column;gap:.75rem}.menu-option{background:linear-gradient(180deg,#4a3a2a,#3a2a1a);border:2px solid #6a5a4a;border-radius:8px;padding:1rem 1.5rem;font-size:1.1rem;color:#e8d8c8;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:1rem;width:100%;text-align:left;font-family:inherit}.menu-option:hover{background:linear-gradient(180deg,#5a4a3a,#4a3a2a);border-color:#ffd87f;transform:translate(8px);color:#ffd87f}.menu-option.selected{background:linear-gradient(180deg,#6a5a4a,#5a4a3a);border-color:#ffd87f;color:#ffd87f;box-shadow:0 0 20px #ffd87f4d}.menu-option.flash{background:linear-gradient(180deg,#ffd87f,#f3c866)!important;color:#1a0a00!important}.menu-option:disabled{opacity:.5;cursor:not-allowed}.menu-option:disabled:hover{transform:none;background:linear-gradient(180deg,#4a3a2a,#3a2a1a);border-color:#6a5a4a;color:#e8d8c8}.menu-icon{font-size:1.5rem;width:30px;text-align:center;flex-shrink:0}.menu-label{flex:1}.menu-hint{font-size:.9rem;color:#8a7a6a;font-family:monospace;margin-left:auto}.menu-option.selected .menu-hint,.menu-option:hover .menu-hint{color:#b0a090}.menu-divider{height:1px;background:linear-gradient(90deg,transparent,#6a5a4a,transparent);margin:.5rem 0}.pause-footer{margin-top:2rem;padding-top:1rem;border-top:1px solid #4a3a2a;text-align:center}.keyboard-hints{display:flex;justify-content:center;gap:2rem;font-size:.85rem;color:#8a7a6a}.hint{display:flex;align-items:center;gap:.5rem}.key{background:#2a1a0a;border:1px solid #6a5a4a;padding:.2rem .5rem;border-radius:4px;font-family:monospace;color:#ffd87f}@media (max-width: 768px){.pause-menu{min-width:95vw;padding:1.5rem}.pause-title{font-size:1.5rem;margin-bottom:1.5rem}.menu-option{padding:.85rem 1rem;font-size:1rem}.menu-hint{display:none}.pause-status-bar{top:10px;right:10px;flex-direction:column;gap:.5rem;font-size:.8rem;padding:.5rem .75rem}.keyboard-hints{flex-wrap:wrap;gap:1rem}}@media (prefers-reduced-motion: reduce){.pause-overlay,.pause-menu,.menu-option{animation:none;transition:none}}.dialogue-overlay-v2{position:fixed;inset:0;background:#000000b3;display:flex;align-items:flex-end;justify-content:center;padding:2rem;z-index:1000}.dialogue-box-v2{position:relative;width:min(900px,90vw);margin-bottom:30px}.dialogue-panel-v2{background:#0a0e18;border-radius:12px;padding:24px 28px 28px;position:relative;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" /></filter><rect width="200" height="200" filter="url(%23noise)" opacity="0.03"/></svg>');box-shadow:0 0 0 2px #000,inset 0 0 0 1px #ffffff26,inset 0 1px #ffffff1a,0 4px 12px #0009,0 0 30px #6496ff33;border-top:2px solid rgba(255,255,255,.08);border-left:2px solid rgba(255,255,255,.05);border-right:2px solid rgba(0,0,0,.3);border-bottom:2px solid rgba(0,0,0,.3)}.corner-ornament-v2{position:absolute;width:24px;height:24px;background:linear-gradient(135deg,#ffd87f,orange);clip-path:polygon(50% 0%,100% 50%,50% 100%,0% 50%);box-shadow:0 0 8px #ffd77f99,inset 1px 1px #fff6}.corner-ornament-v2.top-left{top:-8px;left:-8px;animation:pulse-glow-v2 2s ease-in-out infinite}.corner-ornament-v2.top-right{top:-8px;right:-8px;animation:pulse-glow-v2 2s ease-in-out infinite .5s}.corner-ornament-v2.bottom-left{bottom:-8px;left:-8px;animation:pulse-glow-v2 2s ease-in-out infinite 1s}.corner-ornament-v2.bottom-right{bottom:-8px;right:-8px;animation:pulse-glow-v2 2s ease-in-out infinite 1.5s}@keyframes pulse-glow-v2{0%,to{box-shadow:0 0 8px #ffd77f99,inset 1px 1px #fff6}50%{box-shadow:0 0 16px #ffd77fe6,inset 1px 1px #fff9}}.portrait-section-v2{position:absolute;top:-40px;left:20px;display:flex;flex-direction:column;align-items:center;z-index:10}.speaker-name-v2{background:linear-gradient(135deg,#4a7ab8,#2d5080);color:#ffd87f;font-size:12px;padding:6px 20px;position:relative;margin-bottom:-4px;text-shadow:2px 2px 4px rgba(0,0,0,.9);font-weight:700;text-transform:uppercase;clip-path:polygon(8px 0%,calc(100% - 8px) 0%,100% 50%,calc(100% - 8px) 100%,8px 100%,0% 50%);box-shadow:0 2px 8px #0009,inset 0 1px #fff3;z-index:11}.portrait-frame-v2{position:relative;width:96px;height:96px;background:linear-gradient(135deg,#3a5a8a,#1a3a5a);border-radius:50%;padding:6px;box-shadow:0 0 0 3px #000,0 0 0 4px #ffd87f,0 0 0 6px #000,0 4px 16px #000c,0 0 24px #ffd77f66;animation:portrait-glow-v2 3s ease-in-out infinite}@keyframes portrait-glow-v2{0%,to{box-shadow:0 0 0 3px #000,0 0 0 4px #ffd87f,0 0 0 6px #000,0 4px 16px #000c,0 0 24px #ffd77f66}50%{box-shadow:0 0 0 3px #000,0 0 0 4px #ffe8a0,0 0 0 6px #000,0 4px 16px #000c,0 0 32px #ffd77f99}}.portrait-inner-v2{width:100%;height:100%;border-radius:50%;background:linear-gradient(135deg,#0a0e18,#1a2540);display:flex;align-items:center;justify-content:center;overflow:hidden;box-shadow:inset 0 2px 8px #000c}.dialogue-content-v2{margin-left:120px;min-height:120px;display:flex;flex-direction:column;justify-content:center}.dialogue-text-v2{font-size:14px;line-height:1.8;color:#e5ecff;text-shadow:1px 1px 2px rgba(0,0,0,.8);margin-bottom:16px;min-height:60px}.cursor-v2{display:inline-block;width:8px;height:16px;background:#ffd87f;margin-left:4px;animation:blink-v2 .8s step-end infinite;box-shadow:0 0 4px #ffd77fcc}@keyframes blink-v2{0%,50%{opacity:1}51%,to{opacity:0}}.continue-indicator-v2{position:absolute;bottom:12px;right:16px;display:flex;align-items:center;gap:10px;font-size:10px;color:#9fb3d4;animation:bounce-v2 1.5s ease-in-out infinite}.continue-indicator-v2.is-typing{opacity:.9}.dialogue-next-button-v2{display:inline-flex;align-items:center;gap:6px;padding:8px 12px;background:linear-gradient(135deg,#ffd87f,#f3b24a);border:1px solid #000;border-radius:999px;color:#0a0e18;font-size:11px;font-weight:700;cursor:pointer;box-shadow:0 3px 10px #00000059,inset 0 1px #ffffff59;transition:transform .12s ease,box-shadow .12s ease}.dialogue-next-button-v2:hover{transform:translateY(-1px);box-shadow:0 5px 14px #00000073,0 0 12px #ffd77f66,inset 0 1px #ffffff73}.dialogue-next-button-v2:active{transform:translateY(0);box-shadow:0 2px 8px #0006}.next-icon-v2{font-size:12px}.dialogue-hotkey-v2{padding:6px 8px;border-radius:999px;background:#ffffff0f;border:1px solid rgba(255,255,255,.1);color:#c4d0ea;letter-spacing:.02em}.arrow-sprite-v2{width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-top:12px solid #FFD87F;filter:drop-shadow(0 0 4px rgba(255,215,127,.6));animation:arrow-blink-v2 1s ease-in-out infinite}@keyframes bounce-v2{0%,to{transform:translateY(0)}50%{transform:translateY(-4px)}}@keyframes arrow-blink-v2{0%,to{opacity:1;filter:drop-shadow(0 0 4px rgba(255,215,127,.6))}50%{opacity:.4;filter:drop-shadow(0 0 8px rgba(255,215,127,.9))}}.dialogue-choices-v2{display:flex;flex-direction:column;gap:12px;margin-top:20px}.choice-button-v2{background:linear-gradient(135deg,#2d4a7a,#1a3050);border:none;padding:14px 24px 14px 40px;font-family:inherit;font-size:12px;color:#e5ecff;cursor:pointer;position:relative;text-align:left;clip-path:polygon(20px 0%,calc(100% - 8px) 0%,100% 50%,calc(100% - 8px) 100%,20px 100%,0% 50%);box-shadow:inset 0 2px #ffffff26,inset -2px 0 #0000004d,inset 0 -2px #0000004d,0 4px 8px #0006;text-shadow:1px 1px 2px rgba(0,0,0,.8);transition:all .15s ease-out}.choice-button-v2:before{content:attr(data-number);position:absolute;left:12px;top:50%;transform:translateY(-50%);width:20px;height:20px;background:linear-gradient(135deg,#ffd87f,orange);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:10px;color:#000;font-weight:700;box-shadow:0 0 8px #ffd77f99,inset 1px 1px #fff6}.choice-button-v2:hover{transform:scale(1.02);box-shadow:inset 0 2px #ffffff40,inset -2px 0 #0003,inset 0 -2px #0003,0 6px 16px #0009,0 0 20px #ffd77f66}.choice-button-v2:active{transform:scale(.98);box-shadow:inset 0 -2px #ffffff26,inset 2px 0 #0000004d,inset 0 2px #0000004d,0 2px 4px #0006}@media (max-width: 768px){.dialogue-box-v2{width:95vw}.dialogue-content-v2{margin-left:0;margin-top:80px}.portrait-section-v2{left:50%;transform:translate(-50%)}.dialogue-text-v2{font-size:12px}.choice-button-v2{font-size:11px;padding:12px 20px 12px 36px}}.save-menu-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000;padding:24px}.save-menu-container{width:800px;max-width:100%;max-height:90vh;background:linear-gradient(180deg,#0f2550,#1a3560);border:3px solid rgba(255,255,255,.3);box-shadow:0 8px 32px #0009;padding:24px;display:flex;flex-direction:column;gap:20px;overflow-y:auto;animation:slideIn .3s ease-out;position:relative;border-radius:12px}@keyframes slideIn{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.save-menu-header{display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid rgba(255,255,255,.3);padding-bottom:16px}.save-menu-header h1{font-size:32px;color:#ffd87f;text-shadow:2px 2px 4px rgba(0,0,0,.8);margin:0}.close-btn{background:transparent;border:2px solid rgba(255,255,255,.3);color:#fff;font-size:32px;width:40px;height:40px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;line-height:1}.close-btn:hover{background:#ffffff1a;border-color:#ffd87f;color:#ffd87f}.save-menu-error{background:#c832324d;border:2px solid #C83232;color:#fff;padding:12px;text-align:center;border-radius:4px}.save-menu-loading{background:#4a7ab84d;border:2px solid #4A7AB8;color:#ffd87f;padding:12px;text-align:center;border-radius:4px}.save-menu-actions{display:flex;gap:16px;justify-content:center}.action-btn{background:#141e32e6;border:2px solid rgba(255,255,255,.3);color:#fff;font-size:16px;font-weight:700;padding:12px 24px;cursor:pointer;transition:all .2s;text-transform:uppercase;display:flex;align-items:center;justify-content:center}.action-btn:hover:not(:disabled){background:#4a7ab84d;border-color:#4a7ab8}.action-btn.active{background:#4a7ab8;border-color:#ffd87f;color:#ffd87f}.action-btn:disabled{opacity:.5;cursor:not-allowed}.save-slots{display:flex;flex-direction:column;gap:16px}.save-slot{background:#141e32e6;border:2px solid rgba(255,255,255,.3);padding:16px;cursor:pointer;transition:all .2s}.save-slot:hover:not(.empty){background:#4a7ab833;border-color:#ffffff80;transform:translate(4px)}.save-slot.selected{border-color:#ffd87f;background:#ffd77f1a;box-shadow:0 0 20px #ffd77f4d}.save-slot.empty{opacity:.6;cursor:default}.save-slot.empty:hover{transform:none}.save-slot-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.save-slot-header h2{font-size:20px;color:#ffd87f;text-shadow:1px 1px 2px rgba(0,0,0,.8);margin:0}.action-indicator{font-size:12px;color:#4a7ab8;text-transform:uppercase}.save-slot-content{display:flex;flex-direction:column;gap:8px}.save-slot-portrait{flex-shrink:0;border:2px solid rgba(255,215,127,.5);border-radius:4px;padding:4px;background:#0000004d}.save-slot-meta{display:grid;grid-template-columns:1fr 1fr;gap:8px;flex:1}.meta-row{display:flex;flex-direction:column;gap:4px}.meta-label{font-size:11px;color:#ffffffb3;text-transform:uppercase}.meta-value{font-size:14px;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.8)}.save-slot-empty{text-align:center;padding:24px;color:#ffffff80;font-style:italic}.delete-confirmation{background:#c8323233;border:2px solid #C83232;padding:16px;text-align:center}.delete-confirmation p{color:#fff;margin:0 0 16px;font-size:16px}.confirmation-buttons{display:flex;gap:12px;justify-content:center}.confirm-btn,.cancel-btn{padding:8px 24px;font-size:14px;font-weight:700;cursor:pointer;transition:all .2s;border:2px solid}.confirm-btn{background:#c83232;border-color:#c83232;color:#fff}.confirm-btn:hover{background:#e04040;border-color:#e04040}.cancel-btn{background:transparent;border-color:#ffffff4d;color:#fff}.cancel-btn:hover{background:#ffffff1a;border-color:#ffffff80}.save-menu-footer{display:flex;justify-content:center;padding-top:16px;border-top:2px solid rgba(255,255,255,.3)}.delete-action-btn{background:#c8323233;border:2px solid #C83232;color:#fff;font-size:14px;font-weight:700;padding:10px 20px;cursor:pointer;transition:all .2s;text-transform:uppercase;display:flex;align-items:center;justify-content:center}.delete-action-btn:hover:not(:disabled){background:#c8323266;border-color:#e04040}.delete-action-btn:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 768px){.save-menu-container{width:100%;padding:16px}.save-slot-meta{grid-template-columns:1fr}.save-menu-actions{flex-direction:column}}@media (prefers-reduced-motion: reduce){.save-menu-container,.save-slot{animation:none;transition:none}}
